// SPDX-License-Identifier: (GPL-2.0+ OR MIT)
/*
 * Device tree for Telechips TCC8990 STB board
 *
 * Copyright (C) 2018 Telechips Inc. - http://www.telechips.com
*/

#ifndef DT_OVERLAY
/dts-v1/;
#endif

#include "tcc8995-android-4la.dtsi"

&cpu_opp_table {
        compatible = "operating-points-v2";
        opp-shared;

        opp0 {
                opp-hz = /bits/ 64 <1400000000>;
                opp-microvolt = <900000>;
                clock-latency-ns = <300000>;
        };

        opp1 {
                opp-hz = /bits/ 64 <1250000000>;
                opp-microvolt = <900000>;
                clock-latency-ns = <300000>;
        };

        opp2 {
                opp-hz = /bits/ 64 <1100000000>;
                opp-microvolt = <800000>;
                clock-latency-ns = <300000>;
        };

};

&gpu_opp_table {
	opp@200000000 {
		opp-hz = /bits/ 64 <200000000>;
		opp-microvolt = <760000>;
		opp-core-mask = /bits/ 64 <0x3>;
	};
	opp@300000000 {
		opp-hz = /bits/ 64 <300000000>;
		opp-microvolt = <760000>;
		opp-core-mask = /bits/ 64 <0x3>;
	};
	opp@400000000 {
		opp-hz = /bits/ 64 <400000000>;
		opp-microvolt = <760000>;
		opp-core-mask = /bits/ 64 <0x3>;
	};
};

&vqmmc_sdio {
	compatible = "regulator-gpio";
	regulator-name = "vqmmc_sdio";
	regulator-min-microvolt = <1800000>;
	regulator-max-microvolt = <3300000>;
	regulator-type = "voltage";
	regulator-ramp-delay = <10>;
	regulator-always-on;

	gpios = <&gpg 9 0x4>;	//SD_VOLCTL
	gpios-states = <0>;
	states = < 1800000 0x0 3300000 0x1>;
};

&sdhc2 {
	compatible = "telechips,tcc-sdhci";
	//tcc-mmc-channel-mux = <2>;
	//tcc-mmc-clk-out-tap = <29>;
	//tcc-mmc-cmd-tap = <4>;
	//tcc-mmc-data-tap = <4>;

	//non-removable;
	keep-power-in-suspend;
	cap-sdio-irq;

	pwr-gpio = <&gpa 5 0>;	//SD PWRCTL
	vqmmc-supply = <&vqmmc_sdio>;

	cd-force-presence-change;

	tcm38xx {
		compatible = "telechips,tcm38xx";
		wifi_pwr-gpio = <&gpf 30 0>;
		wlreg_on-gpio = <&gpg 15 0>;
		wifi_pwr_1p8v-gpio = <&gpg 4 0>;
		//wifi_pwr_3p3v-gpio = <&gpsd1 7 0>;
	};
};

&tcc_bluetooth {
	compatible = "telechips, tcc_bluetooth";
	bt_power-gpio = <&gpf 30 0>; /* BTWIFI_VBAT_EN */
	bt_reg_on-gpio = <&gpc 21 0>;
	bt_wake-gpio = <&gpc 20 0>;
	bt_hwake-gpio = <&gpc 22 0>;
	bt_power_1p8v-gpio = <&gpg 4 0>;
	status = "okay";
};

&gpio_keys_polled {
        compatible = "gpio-keys-polled";
        #address-cells = <1>;
        #size-cells = <0>;
        poll-interval = <100>;
        autorepeat;
        button@0 {
                label = "BT Auto Pair Key";
                linux,code = <218>;
                gpios = <&gpa 3 1>;
        };
        button@1 {
                label = "Power Key";
                linux,code = <116>;
                gpios = <&gpf 16 1>;
        };
};

&smartcard {
	status = "disabled";
};

