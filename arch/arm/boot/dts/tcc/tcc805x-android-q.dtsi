// SPDX-License-Identifier: (GPL-2.0+ OR MIT)
/*
 * Device tree for Telechips TCC803x Android platform
 *
 * Copyright (C) 2018 Telechips Inc.
 */

&firmware_android {
#if !defined(CONFIG_SCSI_TCC_SC_UFS) /* temp code, It will be removed when the avb implementation for ufs is complete. */
	compatible = "android,firmware";
	vbmeta {
		compatible = "android,vbmeta";
		parts = "vbmeta,boot,system,vendor";
	};
	fstab {
		compatible = "android,fstab";
		system {
			compatible = "android,system";
			dev = "/dev/block/platform/tcc_sc_mmc/by-name/system";
			type = "ext4";
			mnt_flags = "ro,barrier=1";
#if !defined(CONFIG_ANDROID_AB_UPDATE)
			fsmgr_flags = "wait,avb";
#else
			fsmgr_flags = "wait,avb,slotselect";
#endif
		};
		vendor {
			compatible = "android,vendor";
			dev = "/dev/block/platform/tcc_sc_mmc/by-name/vendor";
			type = "ext4";
			mnt_flags = "ro,barrier=1";
#if !defined(CONFIG_ANDROID_AB_UPDATE)
			fsmgr_flags = "wait,avb";
#else
			fsmgr_flags = "wait,avb,slotselect";
#endif
		};
	};
#else /* CONFIG_SCSI_TCC_SC_UFS */
        compatible = "android,firmware";
        vbmeta {
                compatible = "android,vbmeta";
                parts = "vbmeta,boot,system,vendor";
        };
        fstab {
                compatible = "android,fstab";
                system {
                        compatible = "android,system";
                        dev = "/dev/block/platform/tcc_sc_ufs/by-name/system";
                        type = "ext4";
                        mnt_flags = "ro,barrier=1";
#if !defined(CONFIG_ANDROID_AB_UPDATE)
                        fsmgr_flags = "wait";
#else
                        fsmgr_flags = "wait,slotselect";
#endif
                };
                vendor {
                        compatible = "android,vendor";
                        dev = "/dev/block/platform/tcc_sc_ufs/by-name/vendor";
                        type = "ext4";
                        mnt_flags = "ro,barrier=1";
#if !defined(CONFIG_ANDROID_AB_UPDATE)
                        fsmgr_flags = "wait";
#else
                        fsmgr_flags = "wait,slotselect";
#endif
                };
        };
#endif /* CONFIG_SCSI_TCC_SC_UFS */
};
